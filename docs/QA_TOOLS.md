# Syllabus Q&A Tools

The SyllabusMCP now includes Q&A capabilities that let you ask natural language questions about syllabus content.

## Overview

Two new MCP tools enable question answering:

1. **`answer_syllabus_question`** - Answer questions about a single syllabus
2. **`answer_question_about_syllabi`** - Answer questions about multiple syllabi (comparison, consolidation, analysis)

## How It Works

The orchestrator automatically creates execution plans that:
1. Parse the syllabus/syllabi into structured data
2. Call the appropriate Q&A tool with the parsed data and your question
3. Return a natural language answer generated by an LLM

## Usage Examples

### Single Syllabus Questions

Ask questions about one course:

```bash
# What are the course policies?
uv run python -m orchestrator.run_agent run \
  --prompt "What are the course policies?" \
  pdfs/17603.pdf

# When is the first exam?
uv run python -m orchestrator.run_agent run \
  --prompt "When is the first exam?" \
  pdfs/17603.pdf

# What is the late submission policy?
uv run python -m orchestrator.run_agent run \
  --prompt "What is the late submission policy?" \
  pdfs/17603.pdf

# How many assignments are there?
uv run python -m orchestrator.run_agent run \
  --prompt "How many assignments are there?" \
  pdfs/17603.pdf
```

### Multiple Syllabi Questions

Ask questions across multiple courses:

```bash
# Consolidate policies from all courses
uv run python -m orchestrator.run_agent run \
  --prompt "Consolidate all the course policies" \
  pdfs/17603.pdf pdfs/17611.pdf pdfs/17614.pdf

# Compare late policies
uv run python -m orchestrator.run_agent run \
  --prompt "Compare the late submission policies across all courses" \
  pdfs/*.pdf

# Which course has the strictest attendance policy?
uv run python -m orchestrator.run_agent run \
  --prompt "Which course has the strictest attendance policy?" \
  pdfs/17603.pdf pdfs/17611.pdf pdfs/17614.pdf

# What's the total workload?
uv run python -m orchestrator.run_agent run \
  --prompt "What's the total number of assignments across all courses?" \
  pdfs/*.pdf

# List all exam dates
uv run python -m orchestrator.run_agent run \
  --prompt "List all exam dates across all courses" \
  pdfs/*.pdf
```

## Execution Plan Example

When you ask: **"Consolidate all the course policies"** with 3 PDFs, the orchestrator creates:

```json
{
  "steps": [
    {
      "id": "parse1",
      "service_name": "syllabus_server",
      "tool_name": "parse_syllabus",
      "arguments": {"pdf_path_or_url": "pdfs/17603.pdf"}
    },
    {
      "id": "parse2",
      "service_name": "syllabus_server",
      "tool_name": "parse_syllabus",
      "arguments": {"pdf_path_or_url": "pdfs/17611.pdf"}
    },
    {
      "id": "parse3",
      "service_name": "syllabus_server",
      "tool_name": "parse_syllabus",
      "arguments": {"pdf_path_or_url": "pdfs/17614.pdf"}
    },
    {
      "id": "answer",
      "service_name": "syllabus_server",
      "tool_name": "answer_question_about_syllabi",
      "arguments": {
        "syllabi_data": ["$parse1", "$parse2", "$parse3"],
        "question": "Consolidate all the course policies"
      },
      "depends_on": ["parse1", "parse2", "parse3"]
    }
  ]
}
```

## Tool Descriptions

### answer_syllabus_question

**Purpose:** Answer questions about a single parsed syllabus.

**Input:**
- `syllabus_data` (ParsedSyllabus): The parsed syllabus data structure
- `question` (str): Natural language question

**Output:** Natural language answer (string)

**Example Questions:**
- "What are the course policies?"
- "What is the late policy?"
- "When is the first exam?"
- "How many assignments are there?"
- "What topics are covered in week 3?"

### answer_question_about_syllabi

**Purpose:** Answer questions about multiple parsed syllabi, supporting comparison, consolidation, and cross-course analysis.

**Input:**
- `syllabi_data` (list[ParsedSyllabus]): List of parsed syllabus data structures
- `question` (str): Natural language question

**Output:** Natural language answer (string)

**Example Questions:**
- "Consolidate all the course policies"
- "Which course has the strictest late policy?"
- "What's the total workload across all courses?"
- "Compare the exam schedules"
- "List all assignment due dates across courses"
- "Which course requires the most exams?"

## Tips

1. **Be specific in your questions** - The more specific your question, the better the answer
2. **Use natural language** - You don't need special syntax, just ask naturally
3. **The tool knows course context** - It can distinguish between courses and organize answers by course
4. **Policies are extracted during parsing** - Late policies, attendance policies, AI policies, etc. are all available
5. **Combine with other goals** - You can ask questions as part of larger workflows

## Limitations

- Questions are answered based on the structured data extracted during parsing
- If information wasn't extracted by the parser, the Q&A tool won't have access to it
- The quality of answers depends on the quality of the parsed data
- Very long or complex questions may need to be broken down

## Integration with Other Tools

Q&A tools work seamlessly with other orchestrator capabilities:

```bash
# First create schedule, then answer questions
uv run python -m orchestrator.run_agent run \
  --prompt "Create a unified semester schedule and then tell me which weeks have the most deadlines" \
  pdfs/*.pdf
```

The orchestrator will intelligently plan the workflow to accomplish both goals.
